<html>
<head>
<script src="https://code.jquery.com/jquery-1.7.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="raphael-2.1.4.min.js"></script>
<script src="justgage.js"></script>



<script>
var accessToken = "6da2407cd08c7566cb3d6777990c3f45d50e761e";
var deviceID = "e00fce6849f0c8bf1892a5a1"
var url = "https://api.particle.io/v1/devices/" + deviceID + "/gradosC";
		var url1 = "https://api.particle.io/v1/devices/" + deviceID + "/gradosF";
		var url2 = "https://api.particle.io/v1/devices/" + deviceID + "/humedad";
		function callback(data, status) {
			if (status == "success") {
				temp = parseFloat(data.result);
				temp = temp.toFixed(2);
				g1.refresh(temp);
				setTimeout(getReading, 1000);
			} else {
				alert("Hubo un problema");
			}
		}
		function callback1(data, status) {
			if (status == "success") {
				temp = parseFloat(data.result);
				temp = temp.toFixed(2);
				g2.refresh(temp); // Actualiza la segunda gráfica
				setTimeout(getReading1, 1000);
			} else {
				alert("Hubo un problema");
			}
		}
		function callback2(data, status) {
			if (status == "success") {
				temp = parseFloat(data.result);
				temp = temp.toFixed(2);
				g3.refresh(temp); // Actualiza la tercera gráfica
				setTimeout(getReading2, 1000);
			} else {
				alert("Hubo un problema");
			}
		}
		function getReading() {
			$.get(url, { access_token: accessToken }, callback);
		}
		function getReading1() {
			$.get(url1, { access_token: accessToken }, callback1);
		}
		function getReading2() {
			$.get(url2, { access_token: accessToken }, callback2);
		}				
	</script>
</head>

<body>
	<div id="gauge1" class="gauge"></div>
	<div id="gauge2" class="gauge"></div>
	<div id="gauge3" class="gauge"></div>

	<script>
		var g1 = new JustGage({
			id: "gauge1",
			value: 0,
			min: 0,
			max: 50,
			title: "Temperatura (C)"
		});
		getReading();
	</script>
	<script>
		var g2 = new JustGage({
			id: "gauge2",
			value: 0,
			min: 0,
			max: 100,
			title: "Temperatura (F)"
		});
		getReading1();
	</script>	
	<script>
		var g3 = new JustGage({
			id: "gauge3",
			value: 0,
			min: 0,
			max: 100,
			title: "Humedad (%)"
		});
		getReading2();
	</script>
</body>

</html>
